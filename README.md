# Introduction to Web-based Data Visualization

View the live demo here: https://meguna.github.io/demo-deckgl-app/

## Set up guide

1. Install Node.js (v14+)
2. Install Yarn https://classic.yarnpkg.com/lang/en/docs/install/
  * Not important, but if you're curious, Yarn is a package manager for node. It's similar to NPM, which does more or less the same thing. We will use Yarn in this project because we bootstrapped the project with [create-react-app](https://create-react-app.dev/docs/getting-started/) with Yarn.
3. Install Git https://github.com/git-guides/install-git
4. Clone this repository. Run `yarn` inside the repo's root directory. 
5. Run the app with `yarn run start`. This is called your development server. This should open a window in your broswer at `localhost:3000` (or some other port). You can keep this window open while you're writing code, and when you save changes to your React app, it should reload automatically and display your changes. 

## Deploy Guide

We will deploy this project using Github Pages, a free hosting solution for single page applications. 
This repository currently lives in _my_ github account. For you to deploy this project, we'll first reset the git information associated with the project,
and then run deployment.

Git is a version control manager, which is a fancy way of saying that it keeps track of changes made to a codebase so that developers (especially when collaborating with others) can easily roll back changes or access other peoples' changes. It's also a useful way of uploading code to the cloud. 

1. Run `rm -rf .git` in the root directory of this project to remove any git setup. You can leave the `.gitignore` file intact, because it's a helpful file that isn't associated with any git account (it just tells git to ignore certain files and types of files when pushing changes to the repository). 
2. Run `git init` in the root directory of this project to initialize an empty git repository.
3. Now, navigate to `github.com` and [create a new repository](https://github.com/new) to associate with this project. Name it whatever you want. 
4. Copy the remote address of your new repository. If you navigate to the home page of your repo on github.com (which should be something like `https://github.com/<your-username>/<your-repo-name>`it should be under the green button that says 'code'. It should look something like: `git@github.com:meguna/demo-deckgl-app.git`
5. Run `git add remote origin <your-remote-url-from-step-4>`.
6. Now you can run `yarn run deploy` to publish your web app.

## File Directory Guide

This project is set up as a simple single-page [React](https://reactjs.org/) application. 

* The `src` folder is where your React app resides. 
* The first file you should look at is `src/App.js`. This is where the bulk of your website will reside (unless you move them into separate components and import them into App.js instead). In other words, anything you want to display on your website needs to be referenced or imported into `App.js`'s `return` function one way or another.
* The `public` folder is where you will place any `.html` files generated by Kepler. It also includes the entry point file `index.html`.

## Development Guide

### Adding Interactive Maps

There are two ways to add interactive maps to this website. The first is using Kepler. The second method, which you should only use if you want to customize your map significantly, is by using the Deck.gl and Mapbox integration for React. Note that this method requires you to fluidly write a lot of React code!

#### Kepler Web (Recommended)

1. In [Kepler](https://kepler.gl/demo), export the map using the "Share" button at top left, then select "Export Map." Export your map with the "HTML" option.
2. Put the downloaded html file in the `/public` folder of your project, and rename it to something clear and identifiable. 
3. Import your map in `App.js` by copying this code, remembering to replace `your-map-name` with the name of the map you chose in Step 2:
```
<div className="map-wrapper">
  <iframe src={`${process.env.PUBLIC_URL}/<your-map-name>.html`} title="map" sandbox="allow-scripts"/>
</div>
```
This should load the map into your web site.

#### Using React map integrations
We'll use an example component to demonstrate how this works

1. First, import the example component into `App.js` like so: 
```
import Map from './MapExample';
```
2. Then, use this map in your App component by inserting `<Map />` somewhere inside `<div classname="app"></div>` (for example, line 10).
3. If you run `yarn start` now, you'll notice that the map isn't being loaded. This is because you need to provide it a Mapbox access token. Make a new file called `.env` inside the `src` folder, and put this in its contents:
```
REACT_APP_MAPBOX_ACCESS_TOKEN=<your-mapbox-access-token>
```
Make sure to replace `<your-mapbox-access-token>` with your token, which should be something like `pk.xxxxxxxxx....` 
4. Now, restart your development server (CTRL+C in the window that's running `yarn start`, then run `yarn start` again). You should be able to see the map.
5. You can customize the Map provided in `MapExample.jsx` to fit your needs. The [deck.gl docs](https://deck.gl/docs) are a good place to start. Similarly to how things have already been set up, place any data files you need in the `src/data` directory, and import them into your component. 

